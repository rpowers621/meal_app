{"ast":null,"code":"import _slicedToArray from\"/home/adithyazure/meal_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginPage(){// const { store, actions } = useContext(Context);\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var token=sessionStorage.getItem(\"token\");console.log(\"this is your token\",token);var handleClick=function handleClick(){var opts={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,password:password})};fetch(\"http://127.0.0.1:3000/token\",opts).then(function(resp){if(resp.status===200)return resp.json();else alert(\"There has been some error\");}).then(function(data){console.log(\"this came from the backend\",data);sessionStorage.setItem(\"token\",data.access_token);}).catch(function(error){console.error(\"Therre was an error!\",error);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"LoginPage\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),token&&token!=\"\"&&token!=undefined?\"You are logged in with\"+token:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClick,children:\"Login\"})]})]});}export default LoginPage;","map":{"version":3,"sources":["/home/adithyazure/meal_app/src/LoginPage.js"],"names":["React","useContext","useState","LoginPage","email","setEmail","password","setPassword","token","sessionStorage","getItem","console","log","handleClick","opts","method","headers","body","JSON","stringify","fetch","then","resp","status","json","alert","data","setItem","access_token","catch","error","undefined","e","target","value"],"mappings":"iJAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,CAA4BC,QAA5B,KAA4C,OAA5C,C,wFAEA,QAASC,CAAAA,SAAT,EAAqB,CACnB;AACA,cAA0BD,QAAQ,CAAC,EAAD,CAAlC,wCAAOE,KAAP,eAAcC,QAAd,eACA,eAAgCH,QAAQ,CAAC,EAAD,CAAxC,yCAAOI,QAAP,eAAiBC,WAAjB,eACA,GAAMC,CAAAA,KAAK,CAAGC,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAd,CACAC,OAAO,CAACC,GAAR,CAAY,oBAAZ,CAAkCJ,KAAlC,EAEA,GAAMK,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACxB,GAAMC,CAAAA,IAAI,CAAG,CACXC,MAAM,CAAE,MADG,CAEXC,OAAO,CAAE,CACP,eAAgB,kBADT,CAFE,CAKXC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBf,KAAK,CAAEA,KADY,CAEnBE,QAAQ,CAAEA,QAFS,CAAf,CALK,CAAb,CAUAc,KAAK,CAAC,6BAAD,CAAgCN,IAAhC,CAAL,CACGO,IADH,CACQ,SAACC,IAAD,CAAU,CACd,GAAIA,IAAI,CAACC,MAAL,GAAgB,GAApB,CAAyB,MAAOD,CAAAA,IAAI,CAACE,IAAL,EAAP,CAAzB,IACKC,CAAAA,KAAK,CAAC,2BAAD,CAAL,CACN,CAJH,EAKGJ,IALH,CAKQ,SAACK,IAAD,CAAU,CACdf,OAAO,CAACC,GAAR,CAAY,4BAAZ,CAA0Cc,IAA1C,EACAjB,cAAc,CAACkB,OAAf,CAAuB,OAAvB,CAAgCD,IAAI,CAACE,YAArC,EACD,CARH,EASGC,KATH,CASS,SAACC,KAAD,CAAW,CAChBnB,OAAO,CAACmB,KAAR,CAAc,sBAAd,CAAsCA,KAAtC,EACD,CAXH,EAYD,CAvBD,CAyBA,mBACE,aAAK,SAAS,CAAC,WAAf,wBACE,6BADF,CAEGtB,KAAK,EAAIA,KAAK,EAAI,EAAlB,EAAwBA,KAAK,EAAIuB,SAAjC,CACC,yBAA2BvB,KAD5B,cAGC,oCACE,cACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAC,OAFd,CAGE,KAAK,CAAEJ,KAHT,CAIE,QAAQ,CAAE,kBAAC4B,CAAD,QAAO3B,CAAAA,QAAQ,CAAC2B,CAAC,CAACC,MAAF,CAASC,KAAV,CAAf,EAJZ,EADF,cAOE,cACE,IAAI,CAAC,UADP,CAEE,WAAW,CAAC,UAFd,CAGE,KAAK,CAAE5B,QAHT,CAIE,QAAQ,CAAE,kBAAC0B,CAAD,QAAOzB,CAAAA,WAAW,CAACyB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAlB,EAJZ,EAPF,cAaE,eAAQ,OAAO,CAAErB,WAAjB,mBAbF,GALJ,GADF,CAwBD,CAED,cAAeV,CAAAA,SAAf","sourcesContent":["import React, { useContext, useState } from \"react\";\n\nfunction LoginPage() {\n  // const { store, actions } = useContext(Context);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const token = sessionStorage.getItem(\"token\");\n  console.log(\"this is your token\", token);\n  \n  const handleClick = () => {\n    const opts = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        email: email,\n        password: password,\n      }),\n    };\n    fetch(\"http://127.0.0.1:3000/token\", opts)\n      .then((resp) => {\n        if (resp.status === 200) return resp.json();\n        else alert(\"There has been some error\");\n      })\n      .then((data) => {\n        console.log(\"this came from the backend\", data);\n        sessionStorage.setItem(\"token\", data.access_token);\n      })\n      .catch((error) => {\n        console.error(\"Therre was an error!\", error);\n      });\n  };\n\n  return (\n    <div className=\"LoginPage\">\n      <h1>Login</h1>\n      {token && token != \"\" && token != undefined ? (\n        \"You are logged in with\" + token\n      ) : (\n        <div>\n          <input\n            type=\"text\"\n            placeholder=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n          />\n          <input\n            type=\"password\"\n            placeholder=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n          <button onClick={handleClick}>Login</button>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default LoginPage;\n"]},"metadata":{},"sourceType":"module"}