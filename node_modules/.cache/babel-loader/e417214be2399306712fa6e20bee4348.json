{"ast":null,"code":"import _slicedToArray from\"/home/adithyazure/meal_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from\"react\";import{useHistory}from'react-router';import{Context}from\"./Store/appContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginPage(){var _useContext=useContext(Context),store=_useContext.store,actions=_useContext.actions;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var token=sessionStorage.getItem(\"token\");var history=useHistory();console.log(\"this is your token\",token);var handleClick=function handleClick(){actions.login(email,password).then(function(){history.push(\"/\");});// const opts = {\n//   method: \"POST\",\n//   headers: {\n//     \"Content-Type\": \"application/json\",\n//   },\n//   body: JSON.stringify({\n//     email: email,\n//     password: password,\n//   }),\n// };\n// fetch(\"http://127.0.0.1:3000/token\", opts)\n//   .then((resp) => {\n//     if (resp.status === 200) return resp.json();\n//     else alert(\"There has been some error\");\n//   })\n//   .then(data => {\n//     console.log(\"this came from the backend\", data.access_token );\n//     sessionStorage.setItem(\"token\", data.access_token );\n//   })\n//   .catch((error) => {\n//     console.error(\"There was an error!\", error);\n//   });\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"LoginPage\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),token&&token!=\"\"&&token!=undefined?\"You are logged in with\"+token:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClick,children:\"Login\"})]})]});}export default LoginPage;","map":{"version":3,"sources":["/home/adithyazure/meal_app/src/LoginPage.js"],"names":["React","useContext","useState","useHistory","Context","LoginPage","store","actions","email","setEmail","password","setPassword","token","sessionStorage","getItem","history","console","log","handleClick","login","then","push","undefined","e","target","value"],"mappings":"iJAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,CAA4BC,QAA5B,KAA4C,OAA5C,CACA,OAASC,UAAT,KAA2B,cAA3B,CACA,OAASC,OAAT,KAAwB,oBAAxB,C,wFAEA,QAASC,CAAAA,SAAT,EAAqB,CACnB,gBAA2BJ,UAAU,CAACG,OAAD,CAArC,CAAQE,KAAR,aAAQA,KAAR,CAAeC,OAAf,aAAeA,OAAf,CACA,cAA0BL,QAAQ,CAAC,EAAD,CAAlC,wCAAOM,KAAP,eAAcC,QAAd,eACA,eAAgCP,QAAQ,CAAC,EAAD,CAAxC,yCAAOQ,QAAP,eAAiBC,WAAjB,eACA,GAAMC,CAAAA,KAAK,CAAGC,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAd,CACA,GAAMC,CAAAA,OAAO,CAAGZ,UAAU,EAA1B,CAGAa,OAAO,CAACC,GAAR,CAAY,oBAAZ,CAAkCL,KAAlC,EACA,GAAMM,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACxBX,OAAO,CAACY,KAAR,CAAcX,KAAd,CAAqBE,QAArB,EAA+BU,IAA/B,CAAoC,UAAM,CACxCL,OAAO,CAACM,IAAR,CAAa,GAAb,EACD,CAFD,EAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,CA1BD,CA4BA,mBACE,aAAK,SAAS,CAAC,WAAf,wBACE,6BADF,CAEGT,KAAK,EAAIA,KAAK,EAAI,EAAlB,EAAwBA,KAAK,EAAIU,SAAjC,CACC,yBAA2BV,KAD5B,cAGC,oCACE,cACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAC,OAFd,CAGE,KAAK,CAAEJ,KAHT,CAIE,QAAQ,CAAE,kBAACe,CAAD,QAAOd,CAAAA,QAAQ,CAACc,CAAC,CAACC,MAAF,CAASC,KAAV,CAAf,EAJZ,EADF,cAOE,cACE,IAAI,CAAC,UADP,CAEE,WAAW,CAAC,UAFd,CAGE,KAAK,CAAEf,QAHT,CAIE,QAAQ,CAAE,kBAACa,CAAD,QAAOZ,CAAAA,WAAW,CAACY,CAAC,CAACC,MAAF,CAASC,KAAV,CAAlB,EAJZ,EAPF,cAaE,eAAQ,OAAO,CAAEP,WAAjB,mBAbF,GALJ,GADF,CAwBD,CAED,cAAeb,CAAAA,SAAf","sourcesContent":["import React, { useContext, useState } from \"react\";\nimport { useHistory } from 'react-router';\nimport { Context } from \"./Store/appContext\";\n\nfunction LoginPage() { \n  const { store, actions } = useContext(Context);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const token = sessionStorage.getItem(\"token\");\n  const history = useHistory(); \n\n\n  console.log(\"this is your token\", token);\n  const handleClick = () => {\n    actions.login(email, password).then(() => {\n      history.push(\"/\")\n    });\n    // const opts = {\n    //   method: \"POST\",\n    //   headers: {\n    //     \"Content-Type\": \"application/json\",\n    //   },\n    //   body: JSON.stringify({\n    //     email: email,\n    //     password: password,\n    //   }),\n    // };\n    // fetch(\"http://127.0.0.1:3000/token\", opts)\n    //   .then((resp) => {\n    //     if (resp.status === 200) return resp.json();\n    //     else alert(\"There has been some error\");\n    //   })\n    //   .then(data => {\n    //     console.log(\"this came from the backend\", data.access_token );\n    //     sessionStorage.setItem(\"token\", data.access_token );\n    //   })\n    //   .catch((error) => {\n    //     console.error(\"There was an error!\", error);\n    //   });\n  };\n\n  return (\n    <div className=\"LoginPage\">\n      <h1>Login</h1>\n      {token && token != \"\" && token != undefined ? (\n        \"You are logged in with\" + token\n      ) : (\n        <div>\n          <input\n            type=\"text\"\n            placeholder=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n          />\n          <input\n            type=\"password\"\n            placeholder=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n          <button onClick={handleClick}>Login</button>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default LoginPage;\n"]},"metadata":{},"sourceType":"module"}