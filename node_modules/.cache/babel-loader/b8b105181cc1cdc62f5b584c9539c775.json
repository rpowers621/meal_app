{"ast":null,"code":"import _slicedToArray from\"/home/Jilal99/meal_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{GoogleLogin,GoogleLogout,useGoogleLogin}from\"react-google-login\";import UserProfile from\"./UserProfile\";import\"./Login.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var clientId=process.env.REACT_APP_CLIENTID;var redirectUri=process.env.REDIRECT_URI;// added redirect for google api\nfunction Login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setusername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),useremail=_useState4[0],setuseremail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),userimage=_useState6[0],setuserimage=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),showloginButton=_useState8[0],setShowloginButton=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showlogoutButton=_useState10[0],setShowlogoutButton=_useState10[1];var onLoginSuccess=function onLoginSuccess(res){console.log(\"Login Success:\",res.profileObj);setShowloginButton(false);setShowlogoutButton(true);setusername(res.profileObj.name);setuseremail(res.profileObj.email);setuserimage(res.profileObj.imageUrl);UserProfile.setEmail(res.profileObj.email);UserProfile.setName(res.profileObj.name);fetchEmail(res.profileObj.email);};var onLoginFailure=function onLoginFailure(res){console.log(\"Login Failed:\",res);};var onSignoutSuccess=function onSignoutSuccess(){alert(\"You have been logged out successfully\");console.clear();setShowloginButton(true);setShowlogoutButton(false);};// useState for google api\nvar _useGoogleLogin=useGoogleLogin({onSuccess:onLoginSuccess,clientId:clientId,onFailure:onLoginFailure,redirectUri:redirectUri}),signIn=_useGoogleLogin.signIn,loaded=_useGoogleLogin.loaded;function fetchEmail(email){fetch(\"/\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email})});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsx(\"img\",{src:userimage,atl:\"\"}),/*#__PURE__*/_jsx(\"p\",{children:username}),/*#__PURE__*/_jsx(\"p\",{children:useremail})]}),showloginButton?/*#__PURE__*/ // <GoogleLogin\n//   clientId={clientId}\n//   buttonText=\"Sign In\"\n//   onSuccess={onLoginSuccess}\n//   onFailure={onLoginFailure}\n//   cookiePolicy={\"single_host_origin\"}\n//   isSignedIn={true}\n// />\n_jsx(\"button\",{onClick:signIn,children:\"Button\"}):null,showlogoutButton?/*#__PURE__*/_jsx(GoogleLogout,{clientId:clientId,buttonText:\"Sign Out\",onLogoutSuccess:onSignoutSuccess}):null]});}export default Login;","map":{"version":3,"sources":["/home/Jilal99/meal_app/src/Login.js"],"names":["React","useState","GoogleLogin","GoogleLogout","useGoogleLogin","UserProfile","clientId","process","env","REACT_APP_CLIENTID","redirectUri","REDIRECT_URI","Login","username","setusername","useremail","setuseremail","userimage","setuserimage","showloginButton","setShowloginButton","showlogoutButton","setShowlogoutButton","onLoginSuccess","res","console","log","profileObj","name","email","imageUrl","setEmail","setName","fetchEmail","onLoginFailure","onSignoutSuccess","alert","clear","onSuccess","onFailure","signIn","loaded","fetch","method","headers","body","JSON","stringify"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { GoogleLogin, GoogleLogout, useGoogleLogin } from \"react-google-login\";\nimport UserProfile from \"./UserProfile\";\nimport \"./Login.css\";\nconst clientId = process.env.REACT_APP_CLIENTID;\nconst redirectUri = process.env.REDIRECT_URI;\n// added redirect for google api\n\nfunction Login() {\n\n\n  const [username, setusername] = useState(\"\");\n  const [useremail, setuseremail] = useState(\"\");\n  const [userimage, setuserimage] = useState(\"\");\n\n  const [showloginButton, setShowloginButton] = useState(true);\n  const [showlogoutButton, setShowlogoutButton] = useState(false);\n  const onLoginSuccess = (res) => {\n    console.log(\"Login Success:\", res.profileObj);\n    setShowloginButton(false);\n    setShowlogoutButton(true);\n    setusername(res.profileObj.name);\n    setuseremail(res.profileObj.email);\n    setuserimage(res.profileObj.imageUrl);\n    UserProfile.setEmail(res.profileObj.email);\n    UserProfile.setName(res.profileObj.name);\n    fetchEmail(res.profileObj.email);\n  };\n\n  const onLoginFailure = (res) => {\n    console.log(\"Login Failed:\", res);\n  };\n\n  const onSignoutSuccess = () => {\n    alert(\"You have been logged out successfully\");\n    console.clear();\n    setShowloginButton(true);\n    setShowlogoutButton(false);\n  };\n\n  // useState for google api\n  const { signIn, loaded } = useGoogleLogin({\n    onSuccess: onLoginSuccess,\n    clientId: clientId,\n    onFailure: onLoginFailure,\n    redirectUri: redirectUri,\n  });\n\n  function fetchEmail(email) {\n    fetch(\"/\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ email: email }),\n    });\n  }\n\n  return (\n    <div>\n      <div className=\"user-info\">\n        <img src={userimage} atl=\"\" />\n        <p>{username}</p>\n        <p>{useremail}</p>\n      </div>\n      {showloginButton ? (\n        // <GoogleLogin\n        //   clientId={clientId}\n        //   buttonText=\"Sign In\"\n        //   onSuccess={onLoginSuccess}\n        //   onFailure={onLoginFailure}\n        //   cookiePolicy={\"single_host_origin\"}\n        //   isSignedIn={true}\n        // />\n        <button onClick={signIn}>Button</button>\n      ) : null}\n\n      {showlogoutButton ? (\n        <GoogleLogout\n          clientId={clientId}\n          buttonText=\"Sign Out\"\n          onLogoutSuccess={onSignoutSuccess}\n        ></GoogleLogout>\n      ) : null}\n    </div>\n  );\n}\nexport default Login;"]},"metadata":{},"sourceType":"module"}